var webPage = require('webpage');var page = webPage.create();page.open('http://www.bing.com',function(){console.log('Taking screenshot...');page.render('bing.png');page.evaluate(function(){$('input.b_searchbox').val('javascript');});page.evaluate(function(){function eventFire(el, etype){  if (el.fireEvent) {    el.fireEvent('on' + etype);  } else {    var evObj = document.createEvent('Events');    evObj.initEvent(etype, true, false);    el.dispatchEvent(evObj);  }};eventFire($('#sb_form_go')[0], 'click');});setTimeout(function(){setTimeout(function(){console.log("Testing whether '18,000,000 results' is in markup...");var found = page.evaluate(function(){return $('body').text().search('18,000,000 results') > -1;});if (found === true) console.log('PASS');else console.log('FAIL');console.log('Taking screenshot...');page.render('bing_search.png');phantom.exit();},1000);},1);});
